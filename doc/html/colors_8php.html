<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>progetto201 API: api/colors/colors.php File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">progetto201 API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_0188a3e6da905bc60aceb35bf790b8c9.html">api</a></li><li class="navelem"><a class="el" href="dir_5cc9a26b17b91b920b2235da3a01b23c.html">colors</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">colors.php File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><b>COLORS</b>: manages the colors table.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a58266b8e421a6e017378bf42110952a4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="colors_8php.html#a58266b8e421a6e017378bf42110952a4">get_colors</a> ($t_conn_res)</td></tr>
<tr class="memdesc:a58266b8e421a6e017378bf42110952a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the colors data inside an associative array (the key is called 'data').  <a href="colors_8php.html#a58266b8e421a6e017378bf42110952a4">More...</a><br /></td></tr>
<tr class="separator:a58266b8e421a6e017378bf42110952a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:af4b6fb1bbc77ccc05f10da3b16935b99"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="colors_8php.html#af4b6fb1bbc77ccc05f10da3b16935b99">$response</a> = array('errors' =&gt; array())</td></tr>
<tr class="memdesc:af4b6fb1bbc77ccc05f10da3b16935b99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default response array.  <a href="colors_8php.html#af4b6fb1bbc77ccc05f10da3b16935b99">More...</a><br /></td></tr>
<tr class="separator:af4b6fb1bbc77ccc05f10da3b16935b99"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><b>COLORS</b>: manages the colors table. </p>
<p>Client perspective:</p><ul>
<li><b>GET</b> METHOD --&gt; returns the colors</li>
</ul>
<h2><a class="anchor" id="autotoc_md13"></a>
Description</h2>
<p>This script sets the content type to "JSON", includes the <a class="el" href="db__connection_8php.html" title="DB_CONNECTION: manages database connection and queries.">db_connection.php</a> script </p><blockquote class="doxtable">
<p>Which is used to connect to MySQL and to execute simple select queries (no prepared statements) </p>
</blockquote>
<p>and then it defines the response array.</p>
<p>A function is defined: </p><pre class="fragment">get_colors($t_conn_res)
</pre><p> Returns colors data inside an associative array. The name of its key is 'data'.</p>
<p>If the script is not included in other scripts, the script tries to connect to the database, and checks the request method:</p><ul>
<li>if the method is GET the script returns the colors data</li>
</ul>
<p>When the function finishes, the script closes the connection to the DB, and the data (or errors) is collected in the "response" array. The response array is then returned to the client in JSON format</p>
<p>List of possible errors:</p><ul>
<li><b>300</b> - main: Method not supported by the target resource</li>
<li><b>301</b> - main: No data but also No errors</li>
<li><b>310</b> - <a class="el" href="colors_8php.html#a58266b8e421a6e017378bf42110952a4" title="Returns the colors data inside an associative array (the key is called &#39;data&#39;).">get_colors()</a>: Query returned nothing</li>
<li><b>311</b> - <a class="el" href="colors_8php.html#a58266b8e421a6e017378bf42110952a4" title="Returns the colors data inside an associative array (the key is called &#39;data&#39;).">get_colors()</a>: Error executing query</li>
</ul>
<dl class="section since"><dt>Since</dt><dd>01_01 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Stefano Zenaro (<a href="https://github.com/mario33881">https://github.com/mario33881</a>) </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>MIT </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a58266b8e421a6e017378bf42110952a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58266b8e421a6e017378bf42110952a4">&#9670;&nbsp;</a></span>get_colors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">get_colors </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$t_conn_res</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the colors data inside an associative array (the key is called 'data'). </p>
<p>The function, using the mysqli object inside the $t_conn_res parameter ($t_conn_res['connect_obj']), executes the '$query' query that collects the colors requested by the client.</p>
<p>The returned data depends on which parameters were passed with the request:</p><ul>
<li>if the request has an 'n' parameter: returns that number of colors</li>
<li>if the request has the 'min' and 'max' parameters: returns the colors with an id value between those values</li>
<li>otherwise: returns all the colors</li>
</ul>
<p>The data of the each color is contained inside an associative array:</p><ul>
<li><b>id</b>: identification number</li>
<li><b>color_name</b>: name of the color</li>
<li><b>color_hex</b>: hexadecimal value of the color <blockquote class="doxtable">
<p>the format of color_hex is:</p><div class="fragment"><div class="line"><span class="preprocessor">#RRGGBB</span></div>
</div><!-- fragment --> </blockquote>
</li>
</ul>
<p>If the query execution throws an error, the error is collected in the array with the 'errors' key. The errors have 3 properties:</p><ul>
<li><b>id</b>: identifies the error in the API</li>
<li><b>htmlcode</b>: its the response status code</li>
<li><b>message</b>: details about the error <blockquote class="doxtable">
<p>the error message is written in english </p>
</blockquote>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md14"></a>
Examples:</h3>
<ul>
<li>Example with no errors and without parameters <div class="fragment"><div class="line">GET /api/colors/colors.php</div>
<div class="line">{</div>
<div class="line">  <span class="stringliteral">&quot;errors&quot;</span>: [],</div>
<div class="line">  <span class="stringliteral">&quot;data&quot;</span>: [{</div>
<div class="line">      <span class="stringliteral">&quot;id&quot;</span>: <span class="stringliteral">&quot;4384&quot;</span>,</div>
<div class="line">      <span class="stringliteral">&quot;color_name&quot;</span>: <span class="stringliteral">&quot;red&quot;</span>,</div>
<div class="line">      <span class="stringliteral">&quot;color_hex&quot;</span>: <span class="stringliteral">&quot;#f44336&quot;</span></div>
<div class="line">  },</div>
<div class="line">  {</div>
<div class="line">      <span class="stringliteral">&quot;id&quot;</span>: <span class="stringliteral">&quot;4385&quot;</span>,</div>
<div class="line">      <span class="stringliteral">&quot;color_name&quot;</span>: <span class="stringliteral">&quot;randomname&quot;</span>,</div>
<div class="line">      <span class="stringliteral">&quot;color_hex&quot;</span>: <span class="stringliteral">&quot;#f44337&quot;</span></div>
<div class="line">  },</div>
<div class="line">  ...</div>
<div class="line">  ]</div>
<div class="line">}</div>
</div><!-- fragment --></li>
<li>Example with no errors and with the 'n' parameter: <div class="fragment"><div class="line">GET /api/colors/colors.php?n=3</div>
<div class="line">{</div>
<div class="line">  <span class="stringliteral">&quot;errors&quot;</span>: [],</div>
<div class="line">  <span class="stringliteral">&quot;data&quot;</span>: [</div>
<div class="line">      {</div>
<div class="line">          <span class="stringliteral">&quot;id&quot;</span>: 4379,</div>
<div class="line">          <span class="stringliteral">&quot;color_name&quot;</span>: <span class="stringliteral">&quot;red lighten-5&quot;</span>,</div>
<div class="line">          <span class="stringliteral">&quot;color_hex&quot;</span>: <span class="stringliteral">&quot;#ffebee&quot;</span></div>
<div class="line">      },</div>
<div class="line">      {</div>
<div class="line">          <span class="stringliteral">&quot;id&quot;</span>: 4380,</div>
<div class="line">          <span class="stringliteral">&quot;color_name&quot;</span>: <span class="stringliteral">&quot;red lighten-4&quot;</span>,</div>
<div class="line">          <span class="stringliteral">&quot;color_hex&quot;</span>: <span class="stringliteral">&quot;#ffcdd2&quot;</span></div>
<div class="line">      },</div>
<div class="line">      {</div>
<div class="line">          <span class="stringliteral">&quot;id&quot;</span>: 4381,</div>
<div class="line">          <span class="stringliteral">&quot;color_name&quot;</span>: <span class="stringliteral">&quot;red lighten-3&quot;</span>,</div>
<div class="line">          <span class="stringliteral">&quot;color_hex&quot;</span>: <span class="stringliteral">&quot;#ef9a9a&quot;</span></div>
<div class="line">      }</div>
<div class="line">  ]</div>
<div class="line">}</div>
</div><!-- fragment --></li>
<li>Example with no errors and with the 'min'/'max' parameter: <div class="fragment"><div class="line">GET /api/colors/colors.php?min=4385&amp;max=4387</div>
<div class="line">{</div>
<div class="line">  <span class="stringliteral">&quot;errors&quot;</span>: [],</div>
<div class="line">  <span class="stringliteral">&quot;data&quot;</span>: [</div>
<div class="line">      {</div>
<div class="line">          <span class="stringliteral">&quot;id&quot;</span>: 4385,</div>
<div class="line">          <span class="stringliteral">&quot;color_name&quot;</span>: <span class="stringliteral">&quot;red darken-1&quot;</span>,</div>
<div class="line">          <span class="stringliteral">&quot;color_hex&quot;</span>: <span class="stringliteral">&quot;#e53935&quot;</span></div>
<div class="line">      },</div>
<div class="line">      {</div>
<div class="line">          <span class="stringliteral">&quot;id&quot;</span>: 4386,</div>
<div class="line">          <span class="stringliteral">&quot;color_name&quot;</span>: <span class="stringliteral">&quot;red darken-2&quot;</span>,</div>
<div class="line">          <span class="stringliteral">&quot;color_hex&quot;</span>: <span class="stringliteral">&quot;#d32f2f&quot;</span></div>
<div class="line">      },</div>
<div class="line">      {</div>
<div class="line">          <span class="stringliteral">&quot;id&quot;</span>: 4387,</div>
<div class="line">          <span class="stringliteral">&quot;color_name&quot;</span>: <span class="stringliteral">&quot;red darken-3&quot;</span>,</div>
<div class="line">          <span class="stringliteral">&quot;color_hex&quot;</span>: <span class="stringliteral">&quot;#c62828&quot;</span></div>
<div class="line">      }</div>
<div class="line">  ]</div>
<div class="line">}</div>
</div><!-- fragment --></li>
</ul>
<p>If there are errors, they are collected in the returned array. The function can retun the following errors:</p><ul>
<li><b>310</b>: Query returned nothing</li>
<li><b>311</b>: Error executing query</li>
</ul>
<dl class="section since"><dt>Since</dt><dd>01_01 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$t_conn_res</td><td>array with the connection object (connection is successfull) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array $action_res array with colors data (or error) </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="af4b6fb1bbc77ccc05f10da3b16935b99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4b6fb1bbc77ccc05f10da3b16935b99">&#9670;&nbsp;</a></span>$response</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$response = array('errors' =&gt; array())</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default response array. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
